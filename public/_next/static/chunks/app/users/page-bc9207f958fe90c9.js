(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{66945:(e,s,t)=>{Promise.resolve().then(t.bind(t,90847))},90847:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(95155),l=t(12115),a=t(76046),i=t(34696),d=t(46803),c=t(73110),n=t(13901),o=t(20853),x=t(84267),h=t(45686),u=t(82800);let y=(0,u.A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var p=t(92823);let m=(0,u.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function g(){let e=(0,a.useRouter)(),{isAuthenticated:s,hasRole:t,loading:u}=(0,i.A)(),{showSuccess:g,showError:f}=(0,d.h)(),[j,v]=(0,l.useState)(!0),[b,N]=(0,l.useState)([]),[k,w]=(0,l.useState)([]),[A,C]=(0,l.useState)(""),[M,S]=(0,l.useState)("all"),_=(0,l.useCallback)(async()=>{try{v(!0);let e=await n.Ay.get("/api_core/users");N(e.data.users||[])}catch(e){console.error("Error fetching users:",e),f("Failed to fetch users")}finally{v(!1)}},[f]);(0,l.useEffect)(()=>{if(!u&&!s()){e.push("/login");return}if(s()&&!t("admin")){e.push("/dashboard"),f("You do not have permission to access this page");return}s()&&_()},[u,s,t,e,f,_]),(0,l.useEffect)(()=>{let e=b;A&&(e=e.filter(e=>{var s,t;return(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(A.toLowerCase()))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase()))})),"all"!==M&&(e=e.filter(e=>e.role===M)),w(e)},[b,A,M]);let E=async e=>{if(confirm("Are you sure you want to delete this user?"))try{await n.Ay.delete("/api_core/users/".concat(e)),g("User deleted successfully"),_()}catch(e){console.error("Error deleting user:",e),f("Failed to delete user")}},q=async(e,s)=>{try{await n.Ay.put("/api_core/users/".concat(e,"/role"),{role:s}),g("User role updated successfully"),_()}catch(e){console.error("Error updating role:",e),f("Failed to update user role")}},U=e=>{switch(e){case"admin":return"bg-purple-100 text-purple-700";case"relief_worker":return"bg-blue-100 text-blue-700";case"volunteer":return"bg-green-100 text-green-700";case"donor":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return u||j?(0,r.jsx)(c.A,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,r.jsx)(c.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"User Management"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage system users and permissions"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("div",{className:"px-4 py-2 bg-blue-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:b.length})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:A,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsxs)("select",{value:M,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"all",children:"All Roles"}),(0,r.jsx)("option",{value:"admin",children:"Admin"}),(0,r.jsx)("option",{value:"relief_worker",children:"Relief Worker"}),(0,r.jsx)("option",{value:"volunteer",children:"Volunteer"}),(0,r.jsx)("option",{value:"donor",children:"Donor"})]})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.length>0?k.map(e=>{var s,t;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-semibold",children:null===(s=e.name)||void 0===s?void 0:s.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-gray-400 mt-0.5",children:null===(t=e.email)||void 0===t?void 0:t.split("@")[0]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.phone||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("select",{value:e.role,onChange:s=>q(e.id,s.target.value),className:"px-3 py-1 text-xs font-medium rounded-full border-0 ".concat(U(e.role)),children:[(0,r.jsx)("option",{value:"admin",children:"Admin"}),(0,r.jsx)("option",{value:"relief_worker",children:"Relief Worker"}),(0,r.jsx)("option",{value:"volunteer",children:"Volunteer"}),(0,r.jsx)("option",{value:"donor",children:"Donor"})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("button",{onClick:()=>E(e.id),className:"text-red-600 hover:text-red-700",title:"Delete user",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})})})]},e.id)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No users found"})})})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,r.jsx)(y,{className:"w-5 h-5 text-purple-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Admins"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-800",children:b.filter(e=>"admin"===e.role).length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)(p.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Relief Workers"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-800",children:b.filter(e=>"relief_worker"===e.role).length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)(m,{className:"w-5 h-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Volunteers"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-800",children:b.filter(e=>"volunteer"===e.role).length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,r.jsx)(p.A,{className:"w-5 h-5 text-yellow-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Donors"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-800",children:b.filter(e=>"donor"===e.role).length})]})]})})]})]})})}},73110:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(95155),l=t(12115),a=t(16062),i=t(85524);function d(e){let{children:s}=e,[t,d]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(a.A,{onMenuClick:()=>d(!t)}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(i.A,{isOpen:t,onClose:()=>d(!1)}),(0,r.jsx)("main",{className:"flex-1 p-6 lg:p-8 overflow-x-hidden",children:s})]})]})}},46803:(e,s,t)=>{"use strict";t.d(s,{NotificationProvider:()=>d,h:()=>i});var r=t(95155),l=t(12115);let a=(0,l.createContext)({}),i=()=>{let e=(0,l.useContext)(a);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},d=e=>{let{children:s}=e,[t,i]=(0,l.useState)([]),d=(0,l.useCallback)(e=>{let s=Date.now()+Math.random(),t={id:s,type:e.type||"info",message:e.message,duration:e.duration||5e3};return i(e=>[...e,t]),t.duration>0&&setTimeout(()=>{c(s)},t.duration),s},[]),c=(0,l.useCallback)(e=>{i(s=>s.filter(s=>s.id!==e))},[]),n=(0,l.useCallback)((e,s)=>d({type:"success",message:e,duration:s}),[d]),o=(0,l.useCallback)((e,s)=>d({type:"error",message:e,duration:s}),[d]),x=(0,l.useCallback)((e,s)=>d({type:"warning",message:e,duration:s}),[d]),h=(0,l.useCallback)((e,s)=>d({type:"info",message:e,duration:s}),[d]),u=(0,l.useCallback)(()=>{i([])},[]);return(0,r.jsx)(a.Provider,{value:{notifications:t,addNotification:d,removeNotification:c,showSuccess:n,showError:o,showWarning:x,showInfo:h,clearAll:u},children:s})}},36972:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},35288:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},14081:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},84267:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},30858:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},65236:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},57223:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},86710:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},63348:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},20853:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},45686:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1466:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},92823:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},40767:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82800).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[568,422,696,465,441,517,358],()=>s(66945)),_N_E=e.O()}]);