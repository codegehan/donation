(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{71705:(e,t,a)=>{Promise.resolve().then(a.bind(a,21135))},21135:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var s=a(95155),l=a(12115),r=a(76046),o=a(34696),n=a(73110);function i(e){let{title:t,value:a,icon:l,color:r="blue",trend:o}=e;return(0,s.jsx)("div",{className:"rounded-lg shadow-sm border border-gray-200 p-6 transition-all duration-300 ".concat({blue:"hover:shadow-md hover:border-blue-300 bg-gradient-to-br from-blue-50 to-blue-100/50",green:"hover:shadow-md hover:border-green-300 bg-gradient-to-br from-green-50 to-green-100/50",yellow:"hover:shadow-md hover:border-yellow-300 bg-gradient-to-br from-yellow-50 to-yellow-100/50",red:"hover:shadow-md hover:border-red-300 bg-gradient-to-br from-red-50 to-red-100/50",purple:"hover:shadow-md hover:border-purple-300 bg-gradient-to-br from-purple-50 to-purple-100/50"}[r]),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:t}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:a}),o&&(0,s.jsxs)("p",{className:"text-xs font-medium mt-3 ".concat(o.positive?"text-green-600":"text-red-600"),children:[o.positive?"↑ Increase":"↓ Decrease"," ",o.value]})]}),l&&(0,s.jsx)("div",{className:"p-4 rounded-xl ".concat({blue:"bg-blue-100 text-blue-600 border-blue-200",green:"bg-green-100 text-green-600 border-green-200",yellow:"bg-yellow-100 text-yellow-600 border-yellow-200",red:"bg-red-100 text-red-600 border-red-200",purple:"bg-purple-100 text-purple-600 border-purple-200"}[r]," ml-4 flex-shrink-0"),children:(0,s.jsx)(l,{className:"w-8 h-8"})})]})})}function d(e){let{title:t,children:a,className:l=""}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-300 ".concat(l),children:[t&&(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6 pb-4 border-b border-gray-100",children:t}),(0,s.jsx)("div",{className:"w-full",children:a})]})}var c=a(13901),g=a(41738),x=a(20591),h=a(86878),m=a(36972),u=a(50878),v=a(60719),b=a(92823),p=a(58581),y=a(94973),j=a(15255),f=a(12800),N=a(66963),w=a(27112),D=a(86354),A=a(16161),S=a(22175),k=a(90457),T=a(67732);function B(){let e=(0,r.useRouter)(),{user:t,isAuthenticated:a,loading:B}=(0,o.A)(),[C,E]=(0,l.useState)(!0),[R,F]=(0,l.useState)({totalDonations:0,totalAmount:0,activeCalamities:0,verifiedDonations:0,pendingDonations:0,deliveredDonations:0,activeUsers:0}),[O,_]=(0,l.useState)([]),[H,L]=(0,l.useState)([]),[U,K]=(0,l.useState)([]);(0,l.useEffect)(()=>{if(!B&&!a()){e.push("/login");return}if(a()){W(),(0,g.cH)();let e=(0,g.q2)(e=>{console.log("Dashboard update received:",e),W()});return()=>{e&&e()}}},[B,a,e]);let W=async()=>{try{E(!0),console.log("=== FETCHING DASHBOARD DATA ===");let[e,t,a]=await Promise.all([c.zZ.getStats().catch(()=>({data:{}})),c.zZ.getRecentActivity().catch(()=>({data:{activity:[]}})),c.zZ.getDonationTrends().catch(()=>({data:{trends:[]}}))]);if(console.log("Stats Response:",e.data),console.log("Activity Response:",t.data),console.log("Trends Response:",a.data),e.data){let t={totalDonations:e.data.totalDonations||0,totalAmount:e.data.totalAmount||0,activeCalamities:e.data.activeCalamities||0,verifiedDonations:e.data.verifiedDonations||0,pendingDonations:e.data.pendingDonations||0,deliveredDonations:e.data.deliveredDonations||0,activeUsers:e.data.activeUsers||0};console.log("Setting stats:",t),F(t),e.data.donationsByType&&(console.log("Setting donations by type:",e.data.donationsByType),K(e.data.donationsByType))}t.data.activity&&(console.log("Setting recent activity:",t.data.activity.length,"items"),_(t.data.activity)),a.data.trends&&(console.log("Setting donation trends:",a.data.trends.length,"days"),L(a.data.trends)),console.log("=== DASHBOARD DATA LOADED ===")}catch(e){console.error("Error fetching dashboard data:",e)}finally{E(!1)}},z=["#3B82F6","#10B981","#F59E0B","#EF4444"];return B||C?(0,s.jsx)(n.A,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,s.jsx)(n.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",null==t?void 0:t.name,"! Here's what's happening today."]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(i,{title:"Total Donations",value:R.totalDonations,icon:x.A,color:"blue"}),(0,s.jsx)(i,{title:"Total Amount",value:"₱".concat(R.totalAmount.toLocaleString()),icon:h.A,color:"green"}),(0,s.jsx)(i,{title:"Active Calamities",value:R.activeCalamities,icon:m.A,color:"red"}),(0,s.jsx)(i,{title:"Verified Donations",value:R.verifiedDonations,icon:u.A,color:"green"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsx)(i,{title:"Pending Verification",value:R.pendingDonations,icon:v.A,color:"yellow"}),(0,s.jsx)(i,{title:"Delivered",value:R.deliveredDonations,icon:u.A,color:"green"}),(0,s.jsx)(i,{title:"Active Users",value:R.activeUsers||0,icon:b.A,color:"purple"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(d,{title:"Donation Trends (Last 7 Days)",children:H.length>0?(0,s.jsx)(p.u,{width:"100%",height:300,children:(0,s.jsxs)(y.b,{data:H,children:[(0,s.jsx)(j.d,{strokeDasharray:"3 3"}),(0,s.jsx)(f.W,{dataKey:"date"}),(0,s.jsx)(N.h,{}),(0,s.jsx)(w.m,{}),(0,s.jsx)(D.s,{}),(0,s.jsx)(A.N,{type:"monotone",dataKey:"donations",stroke:"#3B82F6",strokeWidth:2}),(0,s.jsx)(A.N,{type:"monotone",dataKey:"amount",stroke:"#10B981",strokeWidth:2})]})}):(0,s.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No trend data available"})}),(0,s.jsx)(d,{title:"Donations by Type",children:U.length>0?(0,s.jsx)(p.u,{width:"100%",height:300,children:(0,s.jsxs)(S.r,{children:[(0,s.jsx)(k.F,{data:U,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:a}=e;return"".concat(t,": ").concat((100*a).toFixed(0),"%")},outerRadius:100,fill:"#8884d8",dataKey:"value",children:U.map((e,t)=>(0,s.jsx)(T.f,{fill:z[t%z.length]},"cell-".concat(t)))}),(0,s.jsx)(w.m,{})]})}):(0,s.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No donation type data available"})})]}),(0,s.jsx)(d,{title:"Recent Activity",children:(0,s.jsx)("div",{className:"space-y-4",children:O.length>0?O.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.title||e.message}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description||""}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt||e.timestamp).toLocaleString()})]}),e.status&&(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("completed"===e.status||"verified"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.status})]},t)):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No recent activity"})})})]})})}},73110:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(95155),l=a(12115),r=a(16062),o=a(85524);function n(e){let{children:t}=e,[a,n]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(r.A,{onMenuClick:()=>n(!a)}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(o.A,{isOpen:a,onClose:()=>n(!1)}),(0,s.jsx)("main",{className:"flex-1 p-6 lg:p-8 overflow-x-hidden",children:t})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[568,422,185,696,465,441,517,358],()=>t(71705)),_N_E=e.O()}]);