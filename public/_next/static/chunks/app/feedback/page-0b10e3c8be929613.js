(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80],{48052:(e,t,a)=>{Promise.resolve().then(a.bind(a,35134))},35134:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95155),l=a(12115),r=a(76046),n=a(34696),i=a(46803),d=a(73110),c=a(13901),o=a(82800);let x=(0,o.A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),h=(0,o.A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var u=a(63348);let y=(0,o.A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);var g=a(28880),m=a(45686);function b(){let e=(0,r.useRouter)(),{isAuthenticated:t,user:a,loading:o}=(0,n.A)(),{showSuccess:b,showError:p}=(0,i.h)(),[f,j]=(0,l.useState)(!0),[k,v]=(0,l.useState)([]),[N,w]=(0,l.useState)([]),[A,M]=(0,l.useState)(!1),[C,S]=(0,l.useState)(null),[F,I]=(0,l.useState)({donationId:"",rating:5,message:"",type:"general"});(0,l.useEffect)(()=>{if(!o&&!t()){e.push("/login");return}t()&&q()},[o,t,e]);let q=async()=>{try{j(!0);let[e,t]=await Promise.all([c.WB.getAll().catch(()=>({data:{feedbacks:[]}})),c.TB.getAll().catch(()=>({data:{donations:[]}}))]);v(e.data.feedbacks||[]),w(t.data.donations||[])}catch(e){console.error("Error fetching data:",e)}finally{j(!1)}},E=e=>{let{name:t,value:a}=e.target;I(e=>({...e,[t]:a}))},H=async e=>{e.preventDefault();try{C?(await c.WB.update(C.id,{...F,rating:parseInt(F.rating)}),b("Feedback updated successfully")):(await c.WB.create({...F,rating:parseInt(F.rating),userId:null==a?void 0:a.id,userName:null==a?void 0:a.name}),b("Feedback submitted successfully")),M(!1),S(null),I({donationId:"",rating:5,message:"",type:"general"}),q()}catch(e){console.error("Error submitting feedback:",e),p(C?"Failed to update feedback":"Failed to submit feedback")}},z=e=>{S(e),I({donationId:e.donationId||"",rating:e.rating||5,message:e.message||"",type:e.type||"general"}),M(!0)},B=async e=>{if(confirm("Are you sure you want to delete this feedback?"))try{await c.WB.delete(e),b("Feedback deleted successfully"),q()}catch(e){console.error("Error deleting feedback:",e),p("Failed to delete feedback")}},D=e=>(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,s.jsx)(x,{className:"w-4 h-4 ".concat(t<=e?"fill-yellow-400 text-yellow-400":"text-gray-300")},t))});return o||f?(0,s.jsx)(d.A,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,s.jsx)(d.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Feedback"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Share your experience and view acknowledgments"})]}),(0,s.jsxs)("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,s.jsx)(h,{className:"w-5 h-5"}),"Submit Feedback"]})]}),A&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:C?"Edit Feedback":"Submit Feedback"}),(0,s.jsxs)("form",{onSubmit:H,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback Type"}),(0,s.jsxs)("select",{name:"type",value:F.type,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"general",children:"General Feedback"}),(0,s.jsx)("option",{value:"donation",children:"Donation Related"}),(0,s.jsx)("option",{value:"beneficiary",children:"Beneficiary Acknowledgment"}),(0,s.jsx)("option",{value:"suggestion",children:"Suggestion"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Donation (Optional)"}),(0,s.jsxs)("select",{name:"donationId",value:F.donationId,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select a donation"}),N.map(e=>(0,s.jsx)("option",{value:e.id,children:"monetary"===e.type?"Monetary Donation - ₱".concat(e.amount):"In-Kind: ".concat(e.itemName)},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),(0,s.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>I(t=>({...t,rating:e})),className:"focus:outline-none",children:(0,s.jsx)(x,{className:"w-8 h-8 transition-colors ".concat(e<=F.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-200")})},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),(0,s.jsx)("textarea",{name:"message",value:F.message,onChange:E,rows:"5",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Share your thoughts, suggestions, or acknowledgments..."})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:C?"Update Feedback":"Submit Feedback"}),(0,s.jsx)("button",{type:"button",onClick:()=>{M(!1),S(null),I({donationId:"",rating:5,message:"",type:"general"})},className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,s.jsx)(u.A,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Feedback"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:k.length})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,s.jsx)(x,{className:"w-6 h-6 text-yellow-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Average Rating"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:k.length>0?(k.reduce((e,t)=>e+(t.rating||0),0)/k.length).toFixed(1):"0.0"})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,s.jsx)(y,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Positive Feedback"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:k.filter(e=>e.rating>=4).length})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Recent Feedback"}),(0,s.jsx)("div",{className:"space-y-4",children:k.length>0?k.map(e=>{var t;return(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-semibold",children:(null===(t=e.userName)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:e.userName||"Anonymous"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleString()})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[D(e.rating||0),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full ".concat("beneficiary"===e.type?"bg-green-100 text-green-700":"donation"===e.type?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.type})]})]}),(0,s.jsx)("p",{className:"text-gray-700 mb-2",children:e.message}),e.donationId&&(0,s.jsx)("p",{className:"text-xs text-gray-400 italic mt-2",children:"✓ Verified donation-related feedback"}),((null==a?void 0:a.role)==="admin"||e.userId===(null==a?void 0:a.id))&&(0,s.jsxs)("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>z(e),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,s.jsx)(g.A,{className:"w-4 h-4"}),"Edit"]}),(0,s.jsxs)("button",{onClick:()=>B(e.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:[(0,s.jsx)(m.A,{className:"w-4 h-4"}),"Delete"]})]})]},e.id)}):(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)(u.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{children:"No feedback yet"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Be the first to share your experience"})]})})]})]})})}},73110:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(95155),l=a(12115),r=a(16062),n=a(85524);function i(e){let{children:t}=e,[a,i]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(r.A,{onMenuClick:()=>i(!a)}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(n.A,{isOpen:a,onClose:()=>i(!1)}),(0,s.jsx)("main",{className:"flex-1 p-6 lg:p-8 overflow-x-hidden",children:t})]})]})}},46803:(e,t,a)=>{"use strict";a.d(t,{NotificationProvider:()=>i,h:()=>n});var s=a(95155),l=a(12115);let r=(0,l.createContext)({}),n=()=>{let e=(0,l.useContext)(r);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e},i=e=>{let{children:t}=e,[a,n]=(0,l.useState)([]),i=(0,l.useCallback)(e=>{let t=Date.now()+Math.random(),a={id:t,type:e.type||"info",message:e.message,duration:e.duration||5e3};return n(e=>[...e,a]),a.duration>0&&setTimeout(()=>{d(t)},a.duration),t},[]),d=(0,l.useCallback)(e=>{n(t=>t.filter(t=>t.id!==e))},[]),c=(0,l.useCallback)((e,t)=>i({type:"success",message:e,duration:t}),[i]),o=(0,l.useCallback)((e,t)=>i({type:"error",message:e,duration:t}),[i]),x=(0,l.useCallback)((e,t)=>i({type:"warning",message:e,duration:t}),[i]),h=(0,l.useCallback)((e,t)=>i({type:"info",message:e,duration:t}),[i]),u=(0,l.useCallback)(()=>{n([])},[]);return(0,s.jsx)(r.Provider,{value:{notifications:a,addNotification:i,removeNotification:d,showSuccess:c,showError:o,showWarning:x,showInfo:h,clearAll:u},children:t})}},36972:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},35288:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},14081:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},30858:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},65236:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},57223:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},86710:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},63348:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},28880:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},45686:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1466:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},92823:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},40767:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(82800).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[568,422,696,465,441,517,358],()=>t(48052)),_N_E=e.O()}]);